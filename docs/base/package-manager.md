---
title: 从包管理工具演变过程出发，为何更推荐使用pnpm？
author: 战场小包
date: "2021-04-05"
---

## 写在前面

## npm

### 早期 npm

npm 是前端领域最早的包管理工具，给前端社区带来了很大的活力，前端社区的繁荣，npm 功不可没。但在其早期 v1/v2 版本，依赖管理与现在有很大区别，也存在诸多问题。

例如以下列依赖关系为栗子:

```js
// Project 依赖关系
├── A
│   └──B
└── C
    └──B
```

在 npmv1/v2 版本中，Project 项目 node_modules 的目录结构是这样的

![](./../.vuepress/public/images/base/npm2-node-module.png)

从上图可以发现，在 npm 早期阶段，对于项目依赖，node_modules 是层层嵌套结构，在这种结构下项目的依赖关系非常清晰，但是存在两个致命的缺陷

- 公共依赖包重复安装: 同一依赖包理论上只需安装一次，但在早期 npm 嵌套结构策略下，依赖几次便会被安装几次。例如 A、C 共同依赖了 B，B 被在各自的 node_modules 下分别安装一次，这会造成 node_modules 体积过度膨胀，从而引起磁盘空间浪费
- 嵌套路径过长

## yarn

## pnpm

## 总结
